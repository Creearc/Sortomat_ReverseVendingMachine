## Программы Сортомата

Главная программа, запускающая всю систему:
```
main/main_2.py
```

Настройки сортоматов находятся в папке
```
config
```

И отличаются в зависимости от модели сортомата (*sortomat_1* или *sortomat_2*), в зависимости от типа нейронной сети или погодных условий. 

### Настройки

Загрузка сценариев. На данный момент точно готов сценарий с использованием сканера штрихкодов.
```
from config.card_scaner import stable_states
from config.card_scaner import unstable_states
```

Время калибровки крыльчатки. Если отверстие на крыльчатке не будет найдено датчиком в указанное время, система примет решение о неисправности крыльчатки или ее датчика.
```
components['ROTATOR_CALIBRATION_TIME'] = 3.0
```

Максимальное количество ложных срабатываний, после которых система выдаст ошибку.
```
components['FALSE_THINGS_COUNT'] = 5
```

Допустимое время, во время которого датчики руки будут видеть руку или объект. После превышения заданного времени, на экране появится предупреждение.
```
components['HAND_DETECTION_TIME_LIMIT_SMALL'] = 10.0
```

Допустимое время, во время которого датчики руки будут видеть руку или объект. После превышения заданного времени, система выдаст ошибку неисправности датчиков.
```
components['HAND_DETECTION_TIME_LIMIT_BIG'] = 30.0
```

Путь для сохранения фото объектов в отсеке приема.
```
components['SAVE_PATH'] = 'data'
```

Класс объектов, которые необходимо выбрасывать отдельно от сминателя.
```
components['SPECIAL'] = 'al__Other'
```

Размрешение монитора.
```
components['monitor'] = monitor.Monitor(1366, 768)
```

Пины освещения. В разных версиях сортоматов они разные.
```
components['light'] = light.Light(BLUE_PIN=2, RED_PIN=3, GREEN_PIN=4, WHITE_PIN=17)
```

Пути до модели нейронной сети, размер входного слоя, список классов.
```
components['nn_1'] = Model("{}/components/neural_network/models/model360x600FULL.tflite".format(path))
components['nn_1'].input_shape = (512, 297, 3)
components['nn_1'].labels = ['al__Other', 'empty_Empty', 'hdpe__ChemWhitemilk',
                 'Other__Other2', 'pet__Brown', 'pet__Green', 'pet__ChemOilMilk',
                  'pet__Transparent']
```

Настройки фильтра проверки наличия объектов в отсеке приема при красном освещении.
Фрагмент изображения для анализа, значение гаммы, пороговое значение срабатывания фильтра (чем ниже значение, тем более маленькие объекты будут вызывать срабатывание).
```
components['camera'].red_region = [200, 420, 200, 930]
components['camera'].red_gamma = 12.5
components['camera'].red_max = 10
```

Настройки фильтра проверки наличия объектов в отсеке приема при синем освещении. 
```
components['camera'].blue_region = [220, 420, 200, 930]
components['camera'].blue_gamma = 4.5
components['camera'].blue_max = 10
```
